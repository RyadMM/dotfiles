# ==============================================================================
# CORE Tmux Configuration
# ==============================================================================

# Change prefix from Ctrl-b to Ctrl-a
# Why: Ctrl-a is easier on wrists and more accessible than Ctrl-b
# Default: Ctrl-b
# Windows: Works perfectly
unbind C-b
set -g prefix C-a
bind C-a send-prefix  # Allows nested tmux sessions

# Remove escape key delay
# Why: Vim/Neovim users experience lag when pressing Esc without this
# Default: 500ms delay
# Windows: Works perfectly
set -g escape-time 0

# ==============================================================================
# TERMINAL & DISPLAY
# ==============================================================================

# Enable 256-color and true color support
# Why: Modern themes and syntax highlighting look washed out without this
# Default: Basic 16 colors
# Windows: Works in Windows Terminal, WezTerm, Alacritty
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",*:Tc"

# ==============================================================================
# QUALITY OF LIFE
# ==============================================================================

# Enable mouse support
# Why: Click to select panes, scroll for history, resize with drag
# Default: Mouse disabled
# Windows: Works everywhere
set -g mouse on

# Enable focus events
# Why: Terminal can tell tmux when window loses/gains focus
# Default: Disabled
# Windows: Works in modern terminals
set -g focus-events on

# Extended xterm-style keys
# Why: Better support for function keys, arrow keys, etc.
# Default: Basic key support
set -g xterm-keys on


# Increase scrollback buffer
# Why: Default 2000 lines is too little for development logs/output
# Default: 2000 lines
set -g history-limit 100000

# Enable system clipboard via OSC52
# Why: Copy text directly to system clipboard without terminal integration
# Default: Disabled
# Windows: Works in Windows Terminal (v1.16+) and WezTerm, may need `osc52=true` in WT settings
set -g set-clipboard on

# ==============================================================================
# INDEXING & VI MODE
# ==============================================================================

# Start numbering windows and panes at 1 instead of 0
# Why: More intuitive - Window 1, Pane 1 vs Window 0, Pane 0
# Default: 0-based indexing
set -g base-index 1
setw -g pane-base-index 1

# Use Vi keybindings in copy and command mode
# Why: Consistent with Vim/Neovim muscle memory
# Default: Emacs keybindings
setw -g mode-keys vi
set -g status-keys vi

# Custom word separators for easier word selection
# Why: Treat underscore as part of words (common in variables)
# Default: Includes underscore as separator
set -g word-separators ' @$%*+;,./:?[]{}()<>"'

# ==============================================================================
# PANES & SPLITTING
# ==============================================================================

# Unbind default split keys
# Default: " splits horizontally, % splits vertically
# unbind '"'
# unbind %
# 
# # Visual mnemonics for splitting
# # Why: | looks like vertical split, - looks like horizontal split
# # More intuitive than remembering " and %
# bind | split-window -h -c "#{pane_current_path}"  # Split right
# bind - split-window -v -c "#{pane_current_path}"  # Split down

# ==============================================================================
# WINDOWS
# ==============================================================================

# Create new windows in current directory
# Why: Default creates new windows in home directory
# Default: Home directory
bind c new-window -c "#{pane_current_path}"

# Why: Prevents gaps in window numbering (1,2,4 instead of 1,2,3)
# Default: Windows keep their original numbers
set -g renumber-windows on

# ==============================================================================
# LAYOUTS & NAVIGATION
# ==============================================================================

# Quickly set tiled layout
# Why: Tiled layout is useful for comparing multiple panes
bind = select-layout tiled

# Config reload shortcut
# Why: Reload config without killing tmux session
bind R source-file ~/.config/tmux/.tmux.conf \; display-message "Config re-reloaded!"

# ==============================================================================
# COPY MODE (Learning-friendly defaults)
# ==============================================================================

# Copy mode stays at default while learning
# Default bindings:
#   prefix+[    Enter copy mode
#   v           Begin selection (Vi mode)
#   V           Select whole line
#   y           Copy selection (stays in copy mode)
#   Y           Copy whole line
#   q           Quit copy mode

# Future upgrade (uncomment when comfortable):
# bind -T copy-mode-vi y send -X copy-selection-and-cancel

# ==============================================================================
# POWER-USER ACCELERATORS (Commented for learning)
# ==============================================================================

# Alt-key navigation without prefix
# Comment these out initially to learn default flows
# Enable later for speed once comfortable with basics

# Alt+h/j/k/l to navigate panes
# bind -n M-h select-pane -L
# bind -n M-j select-pane -D
# bind -n M-k select-pane -U
# bind -n M-l select-pane -R

# Alt+Shift+H/J/K/L to resize panes
# bind -n M-H resize-pane -L 5
# bind -n M-J resize-pane -D 5
# bind -n M-K resize-pane -U 5
# bind -n M-L resize-pane -R 5

# Alt+\ and Alt+- for splits without prefix
# bind -n M-\ split-window -h -c "#{pane_current_path}"
# bind -n M-- split-window -v -c "#{pane_current_path}"

# Alt+; for copy mode
# bind -n M-\; copy-mode -e
